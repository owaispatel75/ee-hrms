import{r as m,j as e}from"./ui-5WRyBZNT.js";import{u as X,b as C,C as R,l as k,m as D,D as N,ak as G,n as l,P as K,h as w,i as B,j as P,L as S,I as Q,k as A,J as V,X as W,t,B as Z}from"./app-Dcb6Z4yW.js";import{T as ee,a as se,b as q,c as d,d as ae,e as u}from"./table-CVC2OwXt.js";import{T as re}from"./textarea-LYs2mVcU.js";/* empty css            *//* empty css                  */import"./utils-BkYo4WJR.js";function ue({userType:n,payoutRequests:T,settings:o,stats:c,currencySymbol:i}){var v;const{t:s}=X(),[_,x]=m.useState(!1),[E,h]=m.useState(!1),[p,j]=m.useState(null),{data:$,setData:H,post:f,processing:F,errors:g,reset:L}=C({amount:""}),{data:Y,setData:b,post:z,processing:I}=C({notes:""}),M=r=>{r.preventDefault(),f(route("referral.payout-request.create"),{onSuccess:a=>{x(!1),L(),a.props.flash.success?t.success(s(a.props.flash.success)):a.props.flash.error&&t.error(s(a.props.flash.error))},onError:a=>{typeof a=="string"&&t.error(s(a))}})},O=r=>{f(route("referral.payout-request.approve",r.id),{onSuccess:a=>{a.props.flash.success?t.success(s(a.props.flash.success)):a.props.flash.error&&t.error(s(a.props.flash.error))},onError:a=>{typeof a=="string"&&t.error(s(a))}})},J=r=>{r.preventDefault(),p&&z(route("referral.payout-request.reject",p.id),{onSuccess:a=>{h(!1),j(null),b("notes",""),a.props.flash.success?t.success(s(a.props.flash.success)):a.props.flash.error&&t.error(s(a.props.flash.error))},onError:a=>{typeof a=="string"&&t.error(s(a))}})},U=r=>{const a={pending:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300",approved:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300",rejected:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300"};return e.jsx(Z,{className:a[r]||a.pending,children:s(r.charAt(0).toUpperCase()+r.slice(1))})};return e.jsxs("div",{className:"space-y-6",children:[n==="company"&&e.jsxs(R,{children:[e.jsxs(k,{className:"flex flex-row items-center justify-between",children:[e.jsx(D,{children:s("Create Payout Request")}),e.jsxs(N,{open:_,onOpenChange:x,children:[e.jsx(G,{asChild:!0,children:e.jsxs(l,{disabled:c.availableBalance<o.threshold_amount,children:[e.jsx(K,{className:"h-4 w-4 mr-2"}),s("Request Payout")]})}),e.jsxs(w,{children:[e.jsx(B,{children:e.jsx(P,{children:s("Create Payout Request")})}),e.jsxs("form",{onSubmit:M,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(S,{htmlFor:"amount",children:s("Amount")}),e.jsx(Q,{id:"amount",type:"number",step:"0.01",min:o.threshold_amount,max:c.availableBalance,value:$.amount,onChange:r=>H("amount",r.target.value),placeholder:`Min: $${o.threshold_amount}`}),g.amount&&e.jsx("p",{className:"text-sm text-red-500",children:g.amount})]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[e.jsxs("p",{children:[s("Available Balance"),": ",i,c.availableBalance]}),e.jsxs("p",{children:[s("Minimum Amount"),": ",i,o.threshold_amount]})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(l,{type:"button",variant:"outline",onClick:()=>x(!1),children:s("Cancel")}),e.jsx(l,{type:"submit",disabled:F,children:s("Submit Request")})]})]})]})]})]}),e.jsx(A,{children:e.jsx("p",{className:"text-sm text-muted-foreground",children:c.availableBalance<o.threshold_amount?s("You need at least {{amount}} to request a payout",{amount:`${i}${o.threshold_amount}`}):s("You can request up to {{amount}} for payout",{amount:`${i}${c.availableBalance}`})})})]}),e.jsxs(R,{children:[e.jsx(k,{children:e.jsx(D,{children:s(n==="superadmin"?"All Payout Requests":"Your Payout Requests")})}),e.jsx(A,{children:e.jsxs(ee,{children:[e.jsx(se,{children:e.jsxs(q,{className:"dark:bg-gray-800 dark:border-gray-700",children:[n==="superadmin"&&e.jsx(d,{children:s("Company")}),e.jsx(d,{children:s("Amount")}),e.jsx(d,{children:s("Status")}),e.jsx(d,{children:s("Date")}),n==="superadmin"&&e.jsx(d,{children:s("Actions")})]})}),e.jsx(ae,{children:(v=T.data)==null?void 0:v.map(r=>{var a,y;return e.jsxs(q,{className:"dark:bg-gray-900 dark:border-gray-700 dark:hover:bg-gray-800",children:[n==="superadmin"&&e.jsx(u,{children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:(a=r.company)==null?void 0:a.name}),e.jsx("p",{className:"text-sm text-muted-foreground dark:text-gray-400",children:(y=r.company)==null?void 0:y.email})]})}),e.jsxs(u,{children:[i,r.amount]}),e.jsx(u,{children:U(r.status)}),e.jsx(u,{children:new Date(r.created_at).toLocaleDateString()}),n==="superadmin"&&r.status==="pending"&&e.jsx(u,{children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(l,{size:"sm",variant:"outline",onClick:()=>O(r),children:[e.jsx(V,{className:"h-4 w-4 mr-1"}),s("Approve")]}),e.jsxs(l,{size:"sm",variant:"outline",onClick:()=>{j(r),h(!0)},children:[e.jsx(W,{className:"h-4 w-4 mr-1"}),s("Reject")]})]})})]},r.id)})})]})})]}),e.jsx(N,{open:E,onOpenChange:h,children:e.jsxs(w,{children:[e.jsx(B,{children:e.jsx(P,{children:s("Reject Payout Request")})}),e.jsxs("form",{onSubmit:J,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(S,{htmlFor:"notes",children:s("Rejection Reason")}),e.jsx(re,{id:"notes",value:Y.notes,onChange:r=>b("notes",r.target.value),placeholder:s("Enter reason for rejection...")})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(l,{type:"button",variant:"outline",onClick:()=>h(!1),children:s("Cancel")}),e.jsx(l,{type:"submit",variant:"destructive",disabled:I,children:s("Reject Request")})]})]})]})})]})}export{ue as default};
