import{r as h,j as e}from"./ui-5WRyBZNT.js";import{P as Z}from"./page-template-CKIx2Cd4.js";import{u as ee,c as te,r as d,C as m,l as u,m as x,k as g}from"./app-Dcb6Z4yW.js";import{S as re}from"./search-and-filter-bar-BYwCPSIS.js";import{P as ae}from"./pagination-BW8eSOCk.js";import{T as se,a as ie,b as _,c as l,d as oe,e as s}from"./table-CVC2OwXt.js";import{L as ne}from"./list-DOApis6K.js";import{C as le}from"./chart-no-axes-column-increasing-CxynlTOn.js";import{P as ce}from"./printer-ChUpiFfe.js";import{D as de}from"./download-D7x9V5HF.js";import{f as pe}from"./utils-BkYo4WJR.js";import"./textarea-LYs2mVcU.js";import"./select-DeRz6PSF.js";import"./index-BdQq_4o_.js";import"./index-CCaALC5E.js";import"./language-WoaYFWNr.js";import"./trophy-CwLH3bof.js";import"./loader-circle-BHYyy5xm.js";import"./copy-CEvMX_m9.js";import"./CookieConsentBanner-DQyHDBeh.js";import"./switch-t9Hay6Hq.js";import"./chevron-right-D-6n0McF.js";import"./credit-card-DqjaQidM.js";import"./dollar-sign-Cwr3Gu39.js";import"./users-CMrPg0xJ.js";import"./clock-bjnTPlpB.js";import"./calendar-DCWku5XV.js";import"./user-mASyYuwG.js";import"./use-favicon-DuYrl8Bg.js";import"./use-brand-theme-Bndhjp9t.js";/* empty css            *//* empty css                  */import"./filter-CUtbTrvr.js";import"./ellipsis-CcCiYkNb.js";import"./chevron-left-CAhfRZ8t.js";function Je(){var C,y,D,P;const{t}=ee(),{assets:a,assetTypes:L,totalPurchaseValue:j,totalCurrentValue:E,totalDepreciation:b,filters:c={}}=te().props,[i,v]=h.useState(c.asset_type_id||""),[o,w]=h.useState(c.purchase_date_from||""),[n,N]=h.useState(c.purchase_date_to||""),[H,S]=h.useState(!1),B=()=>{d.get(route("hr.assets.index"))},I=()=>{d.get(route("hr.assets.dashboard"))},$=()=>i!==""||o!==""||n!=="",O=()=>(i!==""?1:0)+(o!==""?1:0)+(n!==""?1:0),U=()=>{d.get(route("hr.assets.depreciation-report"),{page:1,asset_type_id:i||void 0,purchase_date_from:o||void 0,purchase_date_to:n||void 0,per_page:c.per_page},{preserveState:!0,preserveScroll:!0})},q=()=>{v(""),w(""),N(""),S(!1),d.get(route("hr.assets.depreciation-report"),{page:1,per_page:c.per_page},{preserveState:!0,preserveScroll:!0})},z=()=>{window.print()},G=()=>{const r=new URLSearchParams({...i&&{asset_type_id:i},...o&&{purchase_date_from:o},...n&&{purchase_date_to:n}});window.open(`${route("hr.assets.export-depreciation-csv")}?${r.toString()}`,"_blank")},J=[{label:t("Asset List"),icon:e.jsx(ne,{className:"h-4 w-4 mr-2"}),variant:"outline",onClick:B},{label:t("Dashboard"),icon:e.jsx(le,{className:"h-4 w-4 mr-2"}),variant:"outline",onClick:I},{label:t("Print"),icon:e.jsx(ce,{className:"h-4 w-4 mr-2"}),variant:"outline",onClick:z,className:"print:hidden"},{label:t("Export CSV"),icon:e.jsx(de,{className:"h-4 w-4 mr-2"}),variant:"outline",onClick:G,className:"print:hidden"}],K=[{title:t("Dashboard"),href:route("dashboard")},{title:t("HR Management"),href:route("hr.assets.index")},{title:t("Asset Management"),href:route("hr.assets.index")},{title:t("Depreciation Report")}],Q=[{value:"",label:t("All Types")},...(L||[]).map(r=>({value:r.id.toString(),label:r.name}))],W=(r,p)=>!r||r===0?0:(r-p)/r*100;return e.jsxs(Z,{title:t("Asset Depreciation Report"),url:"/hr/assets/depreciation-report",actions:J,breadcrumbs:K,children:[e.jsx("div",{className:"bg-white dark:bg-gray-900 rounded-lg shadow mb-4 p-4 print:hidden",children:e.jsx(re,{searchTerm:"",onSearchChange:()=>{},onSearch:()=>{},filters:[{name:"asset_type_id",label:t("Asset Type"),type:"select",value:i,onChange:v,options:Q},{name:"purchase_date_from",label:t("Purchase Date From"),type:"date",value:o,onChange:w},{name:"purchase_date_to",label:t("Purchase Date To"),type:"date",value:n,onChange:N}],showFilters:H,setShowFilters:S,hasActiveFilters:$,activeFilterCount:O,onResetFilters:q,onApplyFilters:U,currentPerPage:((C=c.per_page)==null?void 0:C.toString())||"10",onPerPageChange:r=>{d.get(route("hr.assets.depreciation-report"),{page:1,per_page:parseInt(r),asset_type_id:i||void 0,purchase_date_from:o||void 0,purchase_date_to:n||void 0},{preserveState:!0,preserveScroll:!0})},hideSearch:!0})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[e.jsxs(m,{children:[e.jsx(u,{className:"pb-2",children:e.jsx(x,{className:"text-lg",children:t("Total Purchase Value")})}),e.jsx(g,{children:e.jsx("div",{className:"text-2xl font-bold",children:(y=window.appSettings)==null?void 0:y.formatCurrency(j||0)})})]}),e.jsxs(m,{children:[e.jsx(u,{className:"pb-2",children:e.jsx(x,{className:"text-lg",children:t("Total Current Value")})}),e.jsx(g,{children:e.jsx("div",{className:"text-2xl font-bold",children:(D=window.appSettings)==null?void 0:D.formatCurrency(E||0)})})]}),e.jsxs(m,{children:[e.jsx(u,{className:"pb-2",children:e.jsx(x,{className:"text-lg",children:t("Total Depreciation")})}),e.jsxs(g,{children:[e.jsx("div",{className:"text-2xl font-bold",children:(P=window.appSettings)==null?void 0:P.formatCurrency(b||0)}),e.jsxs("div",{className:"text-sm text-gray-500 mt-1",children:[j>0?Math.round(b/j*100):0,"% ",t("of purchase value")]})]})]})]}),e.jsxs(m,{children:[e.jsx(u,{children:e.jsx(x,{children:t("Asset Depreciation Details")})}),e.jsx(g,{children:e.jsxs(se,{children:[e.jsx(ie,{children:e.jsxs(_,{children:[e.jsx(l,{children:t("Asset Name")}),e.jsx(l,{children:t("Purchase Date")}),e.jsx(l,{className:"text-right",children:t("Purchase Cost")}),e.jsx(l,{children:t("Depreciation Method")}),e.jsx(l,{className:"text-right",children:t("Current Value")}),e.jsx(l,{className:"text-right",children:t("Depreciation")}),e.jsx(l,{className:"text-right",children:t("Depreciation %")})]})}),e.jsx(oe,{children:a.data&&a.data.length>0?a.data.map(r=>{var T,F,A,R,V,k,M;const p=parseFloat(r.purchase_cost||0),f=parseFloat(((T=r.depreciation)==null?void 0:T.current_value)||0),X=p-f,Y=W(p,f);return e.jsxs(_,{children:[e.jsx(s,{className:"font-medium",children:r.name}),e.jsx(s,{children:r.purchase_date?((F=window.appSettings)==null?void 0:F.formatDateTimeSimple(r.purchase_date,!1))||pe(new Date(r.purchase_date),"MMM dd, yyyy"):"-"}),e.jsx(s,{className:"text-right",children:(A=window.appSettings)==null?void 0:A.formatCurrency(p)}),e.jsx(s,{children:((R=r.depreciation)==null?void 0:R.method)==="straight_line"?t("Straight Line"):((V=r.depreciation)==null?void 0:V.method)==="reducing_balance"?t("Reducing Balance"):"-"}),e.jsx(s,{className:"text-right",children:(k=window.appSettings)==null?void 0:k.formatCurrency(f)}),e.jsx(s,{className:"text-right",children:(M=window.appSettings)==null?void 0:M.formatCurrency(X)}),e.jsxs(s,{className:"text-right",children:[Y.toFixed(2),"%"]})]},r.id)}):e.jsx(_,{children:e.jsx(s,{colSpan:7,className:"text-center py-4",children:t("No assets with depreciation data found")})})})]})})]}),e.jsx("div",{className:"mt-4 print:hidden",children:e.jsx(ae,{from:(a==null?void 0:a.from)||0,to:(a==null?void 0:a.to)||0,total:(a==null?void 0:a.total)||0,links:a==null?void 0:a.links,entityName:t("assets"),onPageChange:r=>d.get(r)})})]})}export{Je as default};
