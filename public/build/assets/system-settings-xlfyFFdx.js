import{r as p,j as e}from"./ui-5WRyBZNT.js";import{u as O,c as M,al as Y,L as o,I as V,n as P,x as I,r as A,t as v}from"./app-Dcb6Z4yW.js";import{S as u,a as h,b as x,c as g,d as n}from"./select-DeRz6PSF.js";import{S as L}from"./switch-t9Hay6Hq.js";import{l as R,R as w}from"./language-WoaYFWNr.js";/* empty css            *//* empty css                  */import"./utils-BkYo4WJR.js";import"./index-BdQq_4o_.js";import"./index-CCaALC5E.js";function Z({settings:S={},timezones:y={},dateFormats:C={},timeFormats:b={},isCompanyUser:m=!1}){const{t:a}=O(),D=M().props,l={defaultLanguage:"en",dateFormat:"MM/DD/YYYY",timeFormat:"12h",calendarStartDay:"sunday",defaultTimezone:"UTC",emailVerification:!1,landingPageEnabled:!0,ipRestrictionEnabled:!1,termsConditionsUrl:""},r=Object.keys(S).length>0?S:D.settings||{},[f,z]=p.useState(""),[s,F]=p.useState(()=>({defaultLanguage:r.defaultLanguage||l.defaultLanguage,dateFormat:r.dateFormat||l.dateFormat,timeFormat:r.timeFormat||l.timeFormat,calendarStartDay:r.calendarStartDay||l.calendarStartDay,defaultTimezone:r.defaultTimezone||l.defaultTimezone,emailVerification:r.emailVerification==="true"||r.emailVerification===!0||l.emailVerification,ipRestrictionEnabled:r.ipRestrictionEnabled==="1"||r.ipRestrictionEnabled===1||l.ipRestrictionEnabled,termsConditionsUrl:r.termsConditionsUrl||l.termsConditionsUrl}));p.useEffect(()=>{if(Object.keys(r).length>0){const t=Object.keys(l).reduce((i,c)=>(i[c]=r[c]||l[c],i),{});F(i=>({...i,...t,emailVerification:t.emailVerification==="true"||t.emailVerification===!0||t.emailVerification==="1",ipRestrictionEnabled:t.ipRestrictionEnabled==="1"||t.ipRestrictionEnabled===1||!1,termsConditionsUrl:t.termsConditionsUrl||l.termsConditionsUrl}))}},[r]);const d=(t,i)=>{F(c=>({...c,[t]:i}))},U=t=>{t.preventDefault();const i={defaultLanguage:s.defaultLanguage,dateFormat:s.dateFormat,timeFormat:s.timeFormat,calendarStartDay:s.calendarStartDay,defaultTimezone:s.defaultTimezone,emailVerification:!!s.emailVerification,ipRestrictionEnabled:s.ipRestrictionEnabled?1:0,termsConditionsUrl:s.termsConditionsUrl};m||(i.emailVerification=!!s.emailVerification),m&&(i.ipRestrictionEnabled=s.ipRestrictionEnabled?1:0),A.post(route("settings.system.update"),i,{preserveScroll:!0,onSuccess:c=>{var E,T;const j=(E=c.props.flash)==null?void 0:E.success,N=(T=c.props.flash)==null?void 0:T.error;j?v.success(j):N&&v.error(N)},onError:c=>{const j=c.error||Object.values(c).join(", ")||a("Failed to update system settings");v.error(j)}})},k=Object.entries(y).filter(([t,i])=>t.toLowerCase().includes(f.toLowerCase())||i.toLowerCase().includes(f.toLowerCase()));return e.jsx(Y,{title:a("System Settings"),description:a("Configure system-wide settings for your application"),action:e.jsxs(P,{type:"submit",form:"system-settings-form",size:"sm",children:[e.jsx(I,{className:"h-4 w-4 mr-2"}),a("Save Changes")]}),children:e.jsx("form",{id:"system-settings-form",onSubmit:U,className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(o,{htmlFor:"defaultLanguage",children:a("Default Language")}),e.jsxs(u,{value:s.defaultLanguage,onValueChange:t=>d("defaultLanguage",t),children:[e.jsx(h,{children:e.jsx(x,{placeholder:a("Select language"),children:s.defaultLanguage&&(()=>{const t=R.find(i=>i.code===s.defaultLanguage);return t?e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(w,{countryCode:t.countryCode,svg:!0,style:{width:"1.2em",height:"1.2em"}})," ",e.jsx("span",{children:t.name})," "]}):a("Select language")})()})}),e.jsx(g,{children:R.map(t=>e.jsx(n,{value:t.code,children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(w,{countryCode:t.countryCode,svg:!0,style:{width:"1.2em",height:"1.2em"}})," ",e.jsx("span",{children:t.name})]})},t.code))})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(o,{htmlFor:"dateFormat",children:a("Date Format")}),e.jsxs(u,{value:s.dateFormat,onValueChange:t=>d("dateFormat",t),children:[e.jsx(h,{children:e.jsx(x,{placeholder:a("Select date format")})}),e.jsx(g,{children:Object.keys(C).length>0?Object.entries(C).map(([t,i])=>e.jsx(n,{value:t,children:e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsx("span",{children:t}),e.jsxs("span",{className:"text-muted-foreground text-sm ml-4",children:["(",i,")"]})]})},t)):e.jsxs(e.Fragment,{children:[e.jsx(n,{value:"M j, Y",children:"Jan 1, 2025"}),e.jsx(n,{value:"d-m-Y",children:"01-01-2025"}),e.jsx(n,{value:"Y-m-d",children:"2025-01-01"}),e.jsx(n,{value:"F j, Y",children:"January 1, 2025"})]})})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(o,{htmlFor:"timeFormat",children:a("Time Format")}),e.jsxs(u,{value:s.timeFormat,onValueChange:t=>d("timeFormat",t),children:[e.jsx(h,{children:e.jsx(x,{placeholder:a("Select time format")})}),e.jsx(g,{children:Object.keys(b).length>0?Object.entries(b).map(([t,i])=>e.jsx(n,{value:t,children:e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsx("span",{children:t}),e.jsxs("span",{className:"text-muted-foreground text-sm ml-4",children:["(",i,")"]})]})},t)):e.jsxs(e.Fragment,{children:[e.jsx(n,{value:"g:i A",children:"1:30 PM"}),e.jsx(n,{value:"H:i",children:"13:30"}),e.jsx(n,{value:"g:i a",children:"1:30 pm"})]})})]})]}),!m&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"grid gap-2",children:[e.jsx(o,{htmlFor:"calendarStartDay",children:a("Calendar Start Day")}),e.jsxs(u,{value:s.calendarStartDay,onValueChange:t=>d("calendarStartDay",t),children:[e.jsx(h,{children:e.jsx(x,{placeholder:a("Select start day")})}),e.jsxs(g,{children:[e.jsx(n,{value:"sunday",children:a("Sunday")}),e.jsx(n,{value:"monday",children:a("Monday")})]})]})]})}),e.jsxs("div",{className:"grid gap-2 md:col-span-2",children:[e.jsx(o,{htmlFor:"defaultTimezone",children:a("Default Timezone")}),e.jsxs(u,{value:s.defaultTimezone,onValueChange:t=>d("defaultTimezone",t),children:[e.jsx(h,{children:e.jsx(x,{placeholder:a("Select timezone")})}),e.jsxs(g,{children:[e.jsx("div",{className:"p-2",children:e.jsx(V,{placeholder:a("Search timezones..."),value:f,onChange:t=>z(t.target.value),className:"mb-2"})}),e.jsx("div",{className:"max-h-60 overflow-y-auto",children:Object.keys(y).length>0?k.map(([t,i])=>e.jsx(n,{value:t,children:i},t)):e.jsxs(e.Fragment,{children:[e.jsx(n,{value:"UTC",children:"UTC"}),e.jsx(n,{value:"America/New_York",children:"Eastern Time (ET)"}),e.jsx(n,{value:"America/Chicago",children:"Central Time (CT)"}),e.jsx(n,{value:"Europe/London",children:"London (GMT)"})]})})]})]})]}),!m&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid gap-2 md:col-span-2",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(o,{htmlFor:"emailVerification",children:a("Email Verification")}),e.jsx("p",{className:"text-sm text-muted-foreground",children:a("Require users to verify their email addresses")})]}),e.jsx(L,{id:"emailVerification",checked:s.emailVerification,onCheckedChange:t=>d("emailVerification",t)})]})}),e.jsxs("div",{className:"grid gap-2 md:col-span-2",children:[e.jsx(o,{htmlFor:"termsConditionsUrl",children:a("Terms and Conditions URL")}),e.jsx(V,{id:"termsConditionsUrl",type:"url",placeholder:"https://example.com/terms",value:s.termsConditionsUrl,onChange:t=>d("termsConditionsUrl",t.target.value)}),e.jsx("p",{className:"text-sm text-muted-foreground",children:a("Enter the URL for your Terms and Conditions page that will be linked in the registration form")})]})]}),m&&e.jsx(e.Fragment,{children:e.jsx("div",{className:"grid gap-2 md:col-span-2",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(o,{htmlFor:"ipRestrictionEnabled",children:a("IP Restriction")}),e.jsx("p",{className:"text-sm text-muted-foreground",children:a("Enable IP address restrictions for enhanced security")})]}),e.jsx(L,{id:"ipRestrictionEnabled",checked:s.ipRestrictionEnabled,onCheckedChange:t=>d("ipRestrictionEnabled",t)})]})})})]})})})}export{Z as default};
