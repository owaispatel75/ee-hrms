import{r as v,j as e}from"./ui-5WRyBZNT.js";import{u as z,c as H,al as O,C as E,k as T,L as n,I as d,ae as b,q as B,s as G,v as J,n as w,x as K,t,r as M}from"./app-Dcb6Z4yW.js";import{S as _,a as F,b as A,c as P,d as p}from"./select-DeRz6PSF.js";import{A as Q,a as W}from"./alert-_QIJbTlc.js";import{M as L}from"./mail-DLXHGnVS.js";import{S}from"./server-B9axTPGI.js";import{C as X}from"./circle-alert-DyiJ_7fc.js";import{U as D}from"./user-mASyYuwG.js";import{L as I}from"./lock-DTdsSPVo.js";import{S as R}from"./send-COw_7dkc.js";/* empty css            *//* empty css                  */import"./utils-BkYo4WJR.js";import"./index-BdQq_4o_.js";import"./index-CCaALC5E.js";function ue(){const{t:a}=z(),{settings:o={},globalSettings:r}=H().props,[c,U]=v.useState({provider:o.email_provider||"smtp",driver:o.email_driver||"smtp",host:o.email_host||"smtp.example.com",port:o.email_port||"587",username:o.email_username||"user@example.com",password:o.email_password?"••••••••••••":"",encryption:o.email_encryption||"tls",fromAddress:o.email_from_address||"noreply@example.com",fromName:o.email_from_name||"EE HRMS"}),[h,V]=v.useState(""),[y,g]=v.useState(!1),[N,u]=v.useState(null),m=(s,i)=>{U(l=>({...l,[s]:i}))},k=s=>{s.preventDefault(),r!=null&&r.is_demo||t.loading(a("Saving email settings...")),M.post(route("settings.email.update"),c,{preserveScroll:!0,onSuccess:i=>{var j,f;r!=null&&r.is_demo||t.dismiss();const l=(j=i.props.flash)==null?void 0:j.success,x=(f=i.props.flash)==null?void 0:f.error;l?t.success(l):x?t.error(x):t.success(a("Email settings saved successfully"))},onError:i=>{r!=null&&r.is_demo||t.dismiss();const l=i.error||Object.values(i).join(", ")||a("Failed to save email settings");t.error(l)}})},q=s=>{s.preventDefault(),h&&(g(!0),u(null),r!=null&&r.is_demo||t.loading(a("Sending test email...")),M.post(route("settings.email.test"),{email:h},{preserveScroll:!0,onSuccess:i=>{var j,f;g(!1),r!=null&&r.is_demo||t.dismiss();const l=(j=i.props.flash)==null?void 0:j.success,x=(f=i.props.flash)==null?void 0:f.error;if(l)t.success(l),u({success:!0,message:l});else if(x)t.error(x),u({success:!1,message:x});else{const C=a("Test email sent successfully to {{email}}",{email:h});t.success(C),u({success:!0,message:C})}setTimeout(()=>{u(null)},5e3)},onError:i=>{g(!1),r!=null&&r.is_demo||t.dismiss();const l=i.error||Object.values(i).join(", ")||a("Failed to send test email");t.error(l),u({success:!1,message:l}),setTimeout(()=>{u(null)},5e3)}}))};return e.jsx(O,{title:a("Email Settings"),description:a("Configure email server settings for system notifications and communications"),action:e.jsxs(w,{type:"submit",form:"email-settings-form",size:"sm",children:[e.jsx(K,{className:"h-4 w-4 mr-2"}),a("Save Changes")]}),children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsx("form",{id:"email-settings-form",onSubmit:k,children:e.jsx(E,{children:e.jsx(T,{className:"pt-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(L,{className:"h-4 w-4 text-muted-foreground"}),e.jsx(n,{htmlFor:"provider",className:"font-medium",children:a("Email Provider")})]}),e.jsxs(_,{value:c.provider,onValueChange:s=>{m("provider",s),s==="smtp"?m("driver","smtp"):s==="mailgun"?m("driver","mailgun"):s==="ses"&&m("driver","ses")},children:[e.jsx(F,{children:e.jsx(A,{placeholder:"Select provider"})}),e.jsxs(P,{children:[e.jsx(p,{value:"smtp",children:"SMTP"}),e.jsx(p,{value:"mailgun",children:"Mailgun"}),e.jsx(p,{value:"ses",children:"Amazon SES"}),e.jsx(p,{value:"sendmail",children:"Sendmail"})]})]})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(S,{className:"h-4 w-4 text-muted-foreground"}),e.jsx(n,{htmlFor:"driver",className:"font-medium",children:a("Mail Driver")})]}),e.jsx(d,{id:"driver",value:c.driver,onChange:s=>m("driver",s.target.value),placeholder:"smtp"})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(S,{className:"h-4 w-4 text-muted-foreground"}),e.jsx(n,{htmlFor:"host",className:"font-medium",children:a("SMTP Host")})]}),e.jsx(d,{id:"host",value:c.host,onChange:s=>m("host",s.target.value),placeholder:"smtp.example.com"})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(S,{className:"h-4 w-4 text-muted-foreground"}),e.jsx(n,{htmlFor:"port",className:"font-medium",children:a("SMTP Port")}),e.jsx(b,{children:e.jsxs(B,{children:[e.jsx(G,{asChild:!0,children:e.jsx(X,{className:"h-4 w-4 text-muted-foreground"})}),e.jsx(J,{children:e.jsx("p",{children:a("Common ports: 25, 465, 587, 2525")})})]})})]}),e.jsx(d,{id:"port",value:c.port,onChange:s=>m("port",s.target.value),placeholder:"587"})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(D,{className:"h-4 w-4 text-muted-foreground"}),e.jsx(n,{htmlFor:"username",className:"font-medium",children:a("SMTP Username")})]}),e.jsx(d,{id:"username",value:c.username,onChange:s=>m("username",s.target.value),placeholder:"user@example.com"})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(I,{className:"h-4 w-4 text-muted-foreground"}),e.jsx(n,{htmlFor:"password",className:"font-medium",children:a("SMTP Password")})]}),e.jsx(d,{id:"password",type:"password",value:c.password,onChange:s=>m("password",s.target.value),placeholder:"••••••••••••"})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(I,{className:"h-4 w-4 text-muted-foreground"}),e.jsx(n,{htmlFor:"encryption",className:"font-medium",children:a("Mail Encryption")})]}),e.jsxs(_,{value:c.encryption,onValueChange:s=>m("encryption",s),children:[e.jsx(F,{children:e.jsx(A,{placeholder:"Select encryption"})}),e.jsxs(P,{children:[e.jsx(p,{value:"tls",children:"TLS"}),e.jsx(p,{value:"ssl",children:"SSL"}),e.jsx(p,{value:"none",children:"None"})]})]})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(L,{className:"h-4 w-4 text-muted-foreground"}),e.jsx(n,{htmlFor:"fromAddress",className:"font-medium",children:a("From Address")})]}),e.jsx(d,{id:"fromAddress",value:c.fromAddress,onChange:s=>m("fromAddress",s.target.value),placeholder:"noreply@example.com"})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(D,{className:"h-4 w-4 text-muted-foreground"}),e.jsx(n,{htmlFor:"fromName",className:"font-medium",children:a("From Name")})]}),e.jsx(d,{id:"fromName",value:c.fromName,onChange:s=>m("fromName",s.target.value),placeholder:"System"})]})]})})})})}),e.jsx("div",{className:"lg:col-span-1",children:e.jsx(E,{children:e.jsx(T,{className:"pt-6",children:e.jsxs("form",{onSubmit:q,className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(R,{className:"h-4 w-4 text-primary"}),e.jsx("h3",{className:"text-base font-medium",children:a("Test Email Configuration")})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(n,{htmlFor:"testEmail",className:"font-medium",children:a("Send Test To")}),e.jsx(d,{id:"testEmail",type:"email",value:h,onChange:s=>V(s.target.value),placeholder:"test@example.com",required:!0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:a("Enter an email address to send a test message")})]}),N&&e.jsx(Q,{variant:N.success?"success":"destructive",className:"py-2",children:e.jsx(W,{children:N.message})}),e.jsx(w,{type:"submit",className:"w-full",disabled:y||!h,children:y?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"animate-spin mr-2",children:"◌"}),a("Sending...")]}):e.jsxs(e.Fragment,{children:[e.jsx(R,{className:"h-4 w-4 mr-2"}),a("Send Test Email")]})})]})})})})]})})}export{ue as default};
