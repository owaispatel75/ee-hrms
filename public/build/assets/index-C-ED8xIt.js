import{r as l,j as o}from"./ui-5WRyBZNT.js";import{P as le}from"./page-template-CKIx2Cd4.js";import{u as de,c as pe,P as ce,r as d,t as s}from"./app-Dcb6Z4yW.js";import{C as me}from"./CrudTable-bZrcaGsl.js";import{C as M}from"./CrudFormModal-CMKQqXhM.js";import{C as ue}from"./CrudDeleteModal-h-4oV4Ln.js";import{P as ge}from"./pagination-BW8eSOCk.js";import{S as fe}from"./search-and-filter-bar-BYwCPSIS.js";import"./textarea-LYs2mVcU.js";import"./select-DeRz6PSF.js";import"./index-BdQq_4o_.js";import"./index-CCaALC5E.js";import"./language-WoaYFWNr.js";import"./trophy-CwLH3bof.js";import"./loader-circle-BHYyy5xm.js";import"./copy-CEvMX_m9.js";import"./CookieConsentBanner-DQyHDBeh.js";import"./switch-t9Hay6Hq.js";import"./chevron-right-D-6n0McF.js";import"./credit-card-DqjaQidM.js";import"./dollar-sign-Cwr3Gu39.js";import"./users-CMrPg0xJ.js";import"./clock-bjnTPlpB.js";import"./calendar-DCWku5XV.js";import"./user-mASyYuwG.js";import"./use-favicon-DuYrl8Bg.js";import"./use-brand-theme-Bndhjp9t.js";/* empty css            *//* empty css                  */import"./utils-BkYo4WJR.js";import"./table-CVC2OwXt.js";import"./unlink-M-7GhMDo.js";import"./wrench-EpLqRNAD.js";import"./arrow-left-2RHqSM1t.js";import"./ticket-49lGndAA.js";import"./lock-open-C1AE0wa5.js";import"./award-Ds8Pn3VU.js";import"./ban-CoJEhB2G.js";import"./wallet-V5ITs3Yp.js";import"./bell-DGfoV3HU.js";import"./building-2-NAKjIPfs.js";import"./building-Yd460mDP.js";import"./trending-down-uJsbmf-r.js";import"./camera-8w012zob.js";import"./chart-column-B4Juta60.js";import"./chart-no-axes-column-increasing-CxynlTOn.js";import"./chevron-left-CAhfRZ8t.js";import"./circle-alert-DyiJ_7fc.js";import"./circle-check-big-DvjFjVFs.js";import"./circle-check-SPi-Xvck.js";import"./circle-CTH8Grzw.js";import"./clipboard-list-BeCtsJjD.js";import"./zap-C99Wcc2V.js";import"./download-D7x9V5HF.js";import"./ellipsis-CcCiYkNb.js";import"./external-link-jFGKNT7b.js";import"./eye-off-ZW0JdLst.js";import"./eye-BauIsDws.js";import"./filter-CUtbTrvr.js";import"./rotate-ccw-C8Q-gmhj.js";import"./hard-drive-B2P2rmjY.js";import"./info-DMPjqPji.js";import"./key-CGMSITmc.js";import"./lightbulb-CAdzOdqD.js";import"./link-2-DCTQflBu.js";import"./list-DOApis6K.js";import"./lock-DTdsSPVo.js";import"./mail-DLXHGnVS.js";import"./map-pin-zN3uCaOh.js";import"./phone-C8cPu9FG.js";import"./printer-ChUpiFfe.js";import"./refresh-cw-BLGufQC4.js";import"./send-COw_7dkc.js";import"./server-B9axTPGI.js";import"./square-pen-B2niO3pF.js";import"./star-C6nMG0b0.js";import"./trash-2-CeLXIVfe.js";import"./trash-BE31V_4e.js";import"./trending-up-ClbmsTa0.js";import"./triangle-alert-Bgud0J1k.js";import"./user-plus-Dd4He1MR.js";import"./radio-group-CWZh11qV.js";import"./checkbox-B5iZmSiS.js";import"./scroll-area-BNTU7Fcp.js";function zt(){var q;const{t:e}=de(),{auth:h,candidates:i,jobPostings:C,sources:w,employees:$,filters:n={},globalSettings:p}=pe().props,I=(h==null?void 0:h.permissions)||[],[_,F]=l.useState(n.search||""),[c,N]=l.useState(n.status||"_empty_"),[m,P]=l.useState(n.job_id||"_empty_"),[u,O]=l.useState(n.source_id||"_empty_"),[R,k]=l.useState(!1),[T,S]=l.useState(!1),[U,b]=l.useState(!1),[g,v]=l.useState(null),[y,E]=l.useState("create"),[J,x]=l.useState(!1),[B,H]=l.useState(""),L=()=>c!=="_empty_"||m!=="_empty_"||u!=="_empty_"||_!=="",V=()=>(c!=="_empty_"?1:0)+(m!=="_empty_"?1:0)+(u!=="_empty_"?1:0)+(_!==""?1:0),z=t=>{t.preventDefault(),A()},A=()=>{d.get(route("hr.recruitment.candidates.index"),{page:1,search:_||void 0,status:c!=="_empty_"?c:void 0,job_id:m!=="_empty_"?m:void 0,source_id:u!=="_empty_"?u:void 0,per_page:n.per_page},{preserveState:!0,preserveScroll:!0})},K=t=>{const r=n.sort_field===t&&n.sort_direction==="asc"?"desc":"asc";d.get(route("hr.recruitment.candidates.index"),{sort_field:t,sort_direction:r,page:1,search:_||void 0,status:c!=="_empty_"?c:void 0,job_id:m!=="_empty_"?m:void 0,source_id:u!=="_empty_"?u:void 0,per_page:n.per_page},{preserveState:!0,preserveScroll:!0})},Y=(t,r)=>{switch(v(r),t){case"view":d.get(route("hr.recruitment.candidates.show",r.id));break;case"edit":E("edit"),b(!0);break;case"delete":S(!0);break;case"update-status":v(r),H(r.status),x(!0);break;case"convert-to-employee":p!=null&&p.is_demo||s.loading(e("Loading conversion form...")),d.get(route("hr.recruitment.candidates.convert-to-employee",r.id),{},{onSuccess:a=>{p!=null&&p.is_demo||s.dismiss();const f=a.props;f.flash.success?s.success(e(f.flash.success)):f.flash.error&&s.error(e(f.flash.error))},onError:a=>{p!=null&&p.is_demo||s.dismiss(),typeof a=="string"?s.error(e(a)):s.error(e("Failed to load conversion form: {{errors}}",{errors:Object.values(a).join(", ")}))}});break}},G=()=>{v(null),E("create"),b(!0)},Q=t=>{y==="create"?(s.loading(e("Creating candidate...")),d.post(route("hr.recruitment.candidates.store"),t,{onSuccess:r=>{b(!1),s.dismiss();const a=r.props;a.flash.success?s.success(e(a.flash.success)):a.flash.error&&s.error(e(a.flash.error))},onError:r=>{s.dismiss(),typeof r=="string"?s.error(e(r)):s.error(e("Failed to create candidate: {{errors}}",{errors:Object.values(r).join(", ")}))}})):y==="edit"&&(s.loading(e("Updating candidate...")),d.put(route("hr.recruitment.candidates.update",g.id),t,{onSuccess:r=>{b(!1),s.dismiss();const a=r.props;a.flash.success?s.success(e(a.flash.success)):a.flash.error&&s.error(e(a.flash.error))},onError:r=>{s.dismiss(),typeof r=="string"?s.error(e(r)):s.error(e("Failed to update candidate: {{errors}}",{errors:Object.values(r).join(", ")}))}}))},W=()=>{s.loading(e("Deleting candidate...")),d.delete(route("hr.recruitment.candidates.destroy",g.id),{onSuccess:t=>{S(!1),s.dismiss();const r=t.props;r.flash.success?s.success(e(r.flash.success)):r.flash.error&&s.error(e(r.flash.error))},onError:t=>{s.dismiss(),typeof t=="string"?s.error(e(t)):s.error(e("Failed to delete candidate: {{errors}}",{errors:Object.values(t).join(", ")}))}})},X=t=>{t.status&&(s.loading(e("Updating status...")),d.put(route("hr.recruitment.candidates.update-status",g.id),{status:t.status},{onSuccess:r=>{x(!1),s.dismiss();const a=r.props;a.flash.success?s.success(e(a.flash.success)):a.flash.error&&s.error(e(a.flash.error))},onError:r=>{s.dismiss(),typeof r=="string"?s.error(e(r)):s.error(e("Failed to update status: {{errors}}",{errors:Object.values(r).join(", ")}))}}))},Z=()=>{F(""),N("_empty_"),P("_empty_"),O("_empty_"),k(!1),d.get(route("hr.recruitment.candidates.index"),{page:1,per_page:n.per_page},{preserveState:!0,preserveScroll:!0})},D=[];D.push({label:e("Add Candidate"),icon:o.jsx(ce,{className:"h-4 w-4 mr-2"}),variant:"default",onClick:()=>G()});const ee=[{title:e("Dashboard"),href:route("dashboard")},{title:e("Recruitment"),href:route("hr.recruitment.candidates.index")},{title:e("Candidates")}],te=t=>{switch(t){case"New":return"bg-blue-50 text-blue-700 ring-blue-600/20";case"Screening":return"bg-yellow-50 text-yellow-800 ring-yellow-600/20";case"Interview":return"bg-purple-50 text-purple-700 ring-purple-600/20";case"Offer":return"bg-orange-50 text-orange-700 ring-orange-600/20";case"Offered":return"bg-indigo-50 text-indigo-700 ring-indigo-600/20";case"Hired":return"bg-green-50 text-green-700 ring-green-600/20";case"Rejected":return"bg-red-50 text-red-700 ring-red-600/10";default:return"bg-gray-50 text-gray-600 ring-gray-500/10"}},re=[{key:"full_name",label:e("Name"),sortable:!0,render:(t,r)=>o.jsxs("div",{children:[o.jsxs("div",{className:"font-medium",children:[r.first_name," ",r.last_name]}),o.jsx("div",{className:"text-xs text-gray-500",children:r.email})]})},{key:"job.title",label:e("Campaign - Job Posting"),render:(t,r)=>{var a,f;return o.jsxs("div",{children:[o.jsx("div",{className:"font-medium",children:((a=r.job)==null?void 0:a.title)||"-"}),o.jsx("div",{className:"text-xs text-gray-500",children:((f=r.job)==null?void 0:f.job_code)||""})]})}},{key:"source.name",label:e("Sourced By"),render:(t,r)=>{var a;return((a=r.source)==null?void 0:a.name)||"-"}},{key:"experience_years",label:e("Experience"),render:t=>`${t} ${e("years")}`},{key:"expected_salary",label:e("Expected Salary"),render:t=>{var r;return t?(r=window.appSettings)==null?void 0:r.formatCurrency(t):"-"}},{key:"status",label:e("Status"),render:t=>o.jsx("span",{className:`inline-flex items-center rounded-md px-2 py-1 text-xs font-medium ring-1 ring-inset ${te(t)}`,children:e(t)})},{key:"is_employee",label:e("Employee Converted"),render:t=>o.jsx("span",{className:`inline-flex items-center rounded-md px-2 py-1 text-xs font-medium ring-1 ring-inset ${t?"bg-green-50 text-green-700 ring-green-600/20":"bg-gray-50 text-gray-600 ring-gray-500/10"}`,children:e(t?"Yes":"No")})},{key:"application_date",label:e("Applied"),sortable:!1,render:t=>{var r;return((r=window.appSettings)==null?void 0:r.formatDateTimeSimple(t,!1))||new Date(t).toLocaleDateString()}}],se=[{label:e("View"),icon:"Eye",action:"view",className:"text-blue-500",requiredPermission:"view-candidates"},{label:e("Edit"),icon:"Edit",action:"edit",className:"text-amber-500",requiredPermission:"edit-candidates"},{label:e("Update Status"),icon:"RefreshCw",action:"update-status",className:"text-green-500",requiredPermission:"edit-candidates",condition:t=>!["Hired","Rejected"].includes(t.status)},{label:e("Convert to Employee"),icon:"UserPlus",action:"convert-to-employee",className:"text-purple-500",requiredPermission:"create-employees",condition:t=>t.status==="Hired"&&!t.is_employee},{label:e("Delete"),icon:"Trash2",action:"delete",className:"text-red-500",requiredPermission:"delete-candidates"}],j=[{value:"_empty_",label:e("All Statuses")},{value:"New",label:e("New")},{value:"Screening",label:e("Screening")},{value:"Interview",label:e("Interview")},{value:"Offer",label:e("Offer")},{value:"Offered",label:e("Offered")},{value:"Hired",label:e("Hired")},{value:"Rejected",label:e("Rejected")}],ae=[{value:"_empty_",label:e("All Campaign - Job Postings")},...(C||[]).map(t=>({value:t.id.toString(),label:`${t.job_code} - ${t.title}`}))],ie=[{value:"_empty_",label:e("All Sourced Bys")},...(w||[]).map(t=>({value:t.id.toString(),label:t.name}))],oe=[{value:"_empty_",label:e("Select Job")},...(C||[]).map(t=>({value:t.id.toString(),label:`${t.job_code} - ${t.title}`}))],ne=[{value:"_empty_",label:e("Select Source")},...(w||[]).map(t=>({value:t.id.toString(),label:t.name}))];return[e("Select Employee"),...($||[]).map(t=>({value:t.id.toString(),label:t.name}))],o.jsxs(le,{title:e("Candidates"),description:e("Manage recruitment candidates"),url:"/hr/recruitment/candidates",actions:D,breadcrumbs:ee,noPadding:!0,children:[o.jsx("div",{className:"bg-white dark:bg-gray-900 rounded-lg shadow mb-4 p-4",children:o.jsx(fe,{searchTerm:_,onSearchChange:F,onSearch:z,filters:[{name:"status",label:e("Status"),type:"select",value:c,onChange:N,options:j},{name:"job_id",label:e("Campaign - Job Posting"),type:"select",value:m,onChange:P,options:ae,searchable:!0},{name:"source_id",label:e("Sourced By"),type:"select",value:u,onChange:O,options:ie,searchable:!0}],showFilters:R,setShowFilters:k,hasActiveFilters:L,activeFilterCount:V,onResetFilters:Z,onApplyFilters:A,currentPerPage:((q=n.per_page)==null?void 0:q.toString())||"10",onPerPageChange:t=>{d.get(route("hr.recruitment.candidates.index"),{page:1,per_page:parseInt(t),search:_||void 0,status:c!=="_empty_"?c:void 0,job_id:m!=="_empty_"?m:void 0,source_id:u!=="_empty_"?u:void 0},{preserveState:!0,preserveScroll:!0})}})}),o.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-lg shadow overflow-hidden",children:[o.jsx(me,{columns:re,actions:se,data:(i==null?void 0:i.data)||[],from:(i==null?void 0:i.from)||1,onAction:Y,sortField:n.sort_field,sortDirection:n.sort_direction,onSort:K,permissions:I,entityPermissions:{view:"view-candidates",edit:"edit-candidates",delete:"delete-candidates"}}),o.jsx(ge,{from:(i==null?void 0:i.from)||0,to:(i==null?void 0:i.to)||0,total:(i==null?void 0:i.total)||0,links:i==null?void 0:i.links,entityName:e("candidates"),onPageChange:t=>d.get(t)})]}),o.jsx(M,{isOpen:U,onClose:()=>b(!1),onSubmit:Q,formConfig:{fields:[{name:"first_name",label:e("First Name"),type:"text",required:!0},{name:"last_name",label:e("Last Name"),type:"text",required:!0},{name:"email",label:e("Email"),type:"email",required:!0},{name:"phone",label:e("Contact"),type:"text",required:!0},{name:"status",label:e("Update / Status"),type:"select",required:!0,options:j.filter(t=>t.value!=="_empty_")},{name:"languages_known",label:e("Languages Known"),type:"text"},{name:"job_id",label:e("Campaign - Job Posting"),type:"select",options:oe},{name:"source_id",label:e("Sourced By"),type:"select",options:ne},{name:"current_salary",label:e("Current Salary"),type:"text"},{name:"expected_salary",label:e("Expected Salary"),type:"text"}],modalSize:"lg",layout:"flex"},initialData:g,title:e(y==="create"?"Add New Candidate":y==="edit"?"Edit Candidate":"View Candidate"),mode:y}),o.jsx(ue,{isOpen:T,onClose:()=>S(!1),onConfirm:W,itemName:g?`${g.first_name} ${g.last_name}`:"",entityName:"candidate"}),o.jsx(M,{isOpen:J,onClose:()=>x(!1),onSubmit:X,formConfig:{fields:[{name:"status",label:e("Status"),type:"select",required:!0,options:j.filter(t=>t.value!=="_empty_")}]},initialData:{status:B},title:e("Update Candidate Status"),mode:"edit"})]})}export{zt as default};
