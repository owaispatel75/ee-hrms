import{r as c,j as i}from"./ui-5WRyBZNT.js";import{P as M}from"./page-template-CKIx2Cd4.js";import{u as U,c as $,r as u,t as h}from"./app-Dcb6Z4yW.js";import{C as z}from"./CrudTable-bZrcaGsl.js";import{P as H}from"./pagination-BW8eSOCk.js";import{S as J}from"./search-and-filter-bar-BYwCPSIS.js";import"./textarea-LYs2mVcU.js";import"./select-DeRz6PSF.js";import"./index-BdQq_4o_.js";import"./index-CCaALC5E.js";import"./language-WoaYFWNr.js";import"./trophy-CwLH3bof.js";import"./loader-circle-BHYyy5xm.js";import"./copy-CEvMX_m9.js";import"./CookieConsentBanner-DQyHDBeh.js";import"./switch-t9Hay6Hq.js";import"./chevron-right-D-6n0McF.js";import"./credit-card-DqjaQidM.js";import"./dollar-sign-Cwr3Gu39.js";import"./users-CMrPg0xJ.js";import"./clock-bjnTPlpB.js";import"./calendar-DCWku5XV.js";import"./user-mASyYuwG.js";import"./use-favicon-DuYrl8Bg.js";import"./use-brand-theme-Bndhjp9t.js";/* empty css            *//* empty css                  */import"./utils-BkYo4WJR.js";import"./table-CVC2OwXt.js";import"./unlink-M-7GhMDo.js";import"./wrench-EpLqRNAD.js";import"./arrow-left-2RHqSM1t.js";import"./ticket-49lGndAA.js";import"./lock-open-C1AE0wa5.js";import"./award-Ds8Pn3VU.js";import"./ban-CoJEhB2G.js";import"./wallet-V5ITs3Yp.js";import"./bell-DGfoV3HU.js";import"./building-2-NAKjIPfs.js";import"./building-Yd460mDP.js";import"./trending-down-uJsbmf-r.js";import"./camera-8w012zob.js";import"./chart-column-B4Juta60.js";import"./chart-no-axes-column-increasing-CxynlTOn.js";import"./chevron-left-CAhfRZ8t.js";import"./circle-alert-DyiJ_7fc.js";import"./circle-check-big-DvjFjVFs.js";import"./circle-check-SPi-Xvck.js";import"./circle-CTH8Grzw.js";import"./clipboard-list-BeCtsJjD.js";import"./zap-C99Wcc2V.js";import"./download-D7x9V5HF.js";import"./ellipsis-CcCiYkNb.js";import"./external-link-jFGKNT7b.js";import"./eye-off-ZW0JdLst.js";import"./eye-BauIsDws.js";import"./filter-CUtbTrvr.js";import"./rotate-ccw-C8Q-gmhj.js";import"./hard-drive-B2P2rmjY.js";import"./info-DMPjqPji.js";import"./key-CGMSITmc.js";import"./lightbulb-CAdzOdqD.js";import"./link-2-DCTQflBu.js";import"./list-DOApis6K.js";import"./lock-DTdsSPVo.js";import"./mail-DLXHGnVS.js";import"./map-pin-zN3uCaOh.js";import"./phone-C8cPu9FG.js";import"./printer-ChUpiFfe.js";import"./refresh-cw-BLGufQC4.js";import"./send-COw_7dkc.js";import"./server-B9axTPGI.js";import"./square-pen-B2niO3pF.js";import"./star-C6nMG0b0.js";import"./trash-2-CeLXIVfe.js";import"./trash-BE31V_4e.js";import"./trending-up-ClbmsTa0.js";import"./triangle-alert-Bgud0J1k.js";import"./user-plus-Dd4He1MR.js";function _t(){var P;const{t}=U(),{auth:y,payslips:o,employees:D,filters:a={}}=$().props,F=(y==null?void 0:y.permissions)||[],[n,S]=c.useState(a.search||""),[s,_]=c.useState(a.employee_id||"all"),[l,v]=c.useState(a.status||"all"),[m,b]=c.useState(a.date_from||""),[d,f]=c.useState(a.date_to||""),[j,w]=c.useState(!1),C=()=>n!==""||s!=="all"||l!=="all"||m!==""||d!=="",T=()=>(n?1:0)+(s!=="all"?1:0)+(l!=="all"?1:0)+(m?1:0)+(d?1:0),k=e=>{e.preventDefault(),x()},x=()=>{u.get(route("hr.payslips.index"),{page:1,search:n||void 0,employee_id:s!=="all"?s:void 0,status:l!=="all"?l:void 0,date_from:m||void 0,date_to:d||void 0,per_page:a.per_page},{preserveState:!0,preserveScroll:!0})},N=e=>{const r=a.sort_field===e&&a.sort_direction==="asc"?"desc":"asc";u.get(route("hr.payslips.index"),{sort_field:e,sort_direction:r,page:1,search:n||void 0,employee_id:s!=="all"?s:void 0,status:l!=="all"?l:void 0,date_from:m||void 0,date_to:d||void 0,per_page:a.per_page},{preserveState:!0,preserveScroll:!0})},A=(e,r)=>{switch(e){case"download":E(r);break}},E=e=>{h.loading(t("Downloading payslip...")),window.location.href=route("hr.payslips.download",e.id),setTimeout(()=>{h.dismiss(),h.success(t("Payslip downloaded successfully")),u.reload({only:["payslips"]})},100)},L=()=>{S(""),_("all"),v("all"),b(""),f(""),w(!1),u.get(route("hr.payslips.index"),{page:1,per_page:a.per_page},{preserveState:!0,preserveScroll:!0})},O=[],R=[{title:t("Dashboard"),href:route("dashboard")},{title:t("Payroll Management"),href:route("hr.payslips.index")},{title:t("Payslips")}],G=[{key:"payslip_number",label:t("Payslip Number"),sortable:!0,render:e=>i.jsx("span",{className:"font-mono text-blue-600",children:e})},{key:"employee",label:t("Employee"),render:(e,r)=>{var p;return((p=r.employee)==null?void 0:p.name)||"-"}},{key:"pay_period",label:t("Pay Period"),render:(e,r)=>{var p,g;return i.jsxs("div",{className:"text-sm",children:[i.jsx("div",{children:((p=window.appSettings)==null?void 0:p.formatDateTimeSimple(r.pay_period_start,!1))||new Date(r.pay_period_start).toLocaleDateString()}),i.jsxs("div",{className:"text-gray-500",children:["to ",((g=window.appSettings)==null?void 0:g.formatDateTimeSimple(r.pay_period_end,!1))||new Date(r.pay_period_end).toLocaleDateString()]})]})}},{key:"pay_date",label:t("Pay Date"),sortable:!0,render:e=>{var r;return((r=window.appSettings)==null?void 0:r.formatDateTimeSimple(e,!1))||new Date(e).toLocaleDateString()}},{key:"net_pay",label:t("Net Pay"),render:(e,r)=>{var p,g;return i.jsx("span",{className:"font-mono text-green-600",children:(g=window.appSettings)==null?void 0:g.formatCurrency(((p=r.payroll_entry)==null?void 0:p.net_pay)||0)})}},{key:"status",label:t("Status"),render:e=>{const r={generated:"bg-blue-50 text-blue-700 ring-blue-600/20",sent:"bg-green-50 text-green-700 ring-green-600/20",downloaded:"bg-purple-50 text-purple-700 ring-purple-600/20"};return i.jsx("span",{className:`inline-flex items-center rounded-md px-2 py-1 text-xs font-medium ring-1 ring-inset ${r[e]}`,children:t(e.charAt(0).toUpperCase()+e.slice(1))})}},{key:"created_at",label:t("Generated On"),sortable:!0,render:e=>{var r;return((r=window.appSettings)==null?void 0:r.formatDateTimeSimple(e,!1))||new Date(e).toLocaleDateString()}}],q=[{label:t("Download PDF"),icon:"Download",action:"download",className:"text-blue-500",requiredPermission:"download-payslips"}],B=[{value:"all",label:t("All Employees")},...(D||[]).map(e=>({value:e.id.toString(),label:e.name}))],I=[{value:"all",label:t("All Statuses")},{value:"generated",label:t("Generated")},{value:"sent",label:t("Sent")},{value:"downloaded",label:t("Downloaded")}];return i.jsxs(M,{title:t("Payslips"),url:"/hr/payslips",actions:O,breadcrumbs:R,noPadding:!0,children:[i.jsx("div",{className:"bg-white dark:bg-gray-900 rounded-lg shadow mb-4 p-4",children:i.jsx(J,{searchTerm:n,onSearchChange:S,onSearch:k,filters:[{name:"employee_id",label:t("Employee"),type:"select",value:s,onChange:_,options:B},{name:"status",label:t("Status"),type:"select",value:l,onChange:v,options:I},{name:"date_from",label:t("Period From"),type:"date",value:m,onChange:b},{name:"date_to",label:t("Period To"),type:"date",value:d,onChange:f}],showFilters:j,setShowFilters:w,hasActiveFilters:C,activeFilterCount:T,onResetFilters:L,onApplyFilters:x,currentPerPage:((P=a.per_page)==null?void 0:P.toString())||"10",onPerPageChange:e=>{u.get(route("hr.payslips.index"),{page:1,per_page:parseInt(e),search:n||void 0,employee_id:s!=="all"?s:void 0,status:l!=="all"?l:void 0,date_from:m||void 0,date_to:d||void 0},{preserveState:!0,preserveScroll:!0})}})}),i.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-lg shadow overflow-hidden",children:[i.jsx(z,{columns:G,actions:q,data:(o==null?void 0:o.data)||[],from:(o==null?void 0:o.from)||1,onAction:A,sortField:a.sort_field,sortDirection:a.sort_direction,onSort:N,permissions:F,entityPermissions:{view:"view-payslips",create:"create-payslips",edit:"edit-payslips",delete:"delete-payslips"}}),i.jsx(H,{from:(o==null?void 0:o.from)||0,to:(o==null?void 0:o.to)||0,total:(o==null?void 0:o.total)||0,links:o==null?void 0:o.links,entityName:t("payslips"),onPageChange:e=>u.get(e)})]})]})}export{_t as default};
