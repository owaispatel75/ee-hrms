import{r as L,j as e}from"./ui-5WRyBZNT.js";import{P as M}from"./page-template-CKIx2Cd4.js";import{u as H,c as I,w as l,C as c,l as h,m as u,y as O,B as d,k as x,z as $,n as w,r as i,t as a}from"./app-Dcb6Z4yW.js";import{P as F}from"./progress-L2RQGp9c.js";import{C as R}from"./CrudDeleteModal-h-4oV4Ln.js";import{A as v}from"./arrow-left-2RHqSM1t.js";import{C as N}from"./chart-no-axes-column-increasing-CxynlTOn.js";import{S as V}from"./square-pen-B2niO3pF.js";import{T as q}from"./trash-BE31V_4e.js";import{D as z}from"./download-D7x9V5HF.js";import"./textarea-LYs2mVcU.js";import"./select-DeRz6PSF.js";import"./index-BdQq_4o_.js";import"./index-CCaALC5E.js";import"./language-WoaYFWNr.js";import"./trophy-CwLH3bof.js";import"./loader-circle-BHYyy5xm.js";import"./copy-CEvMX_m9.js";import"./CookieConsentBanner-DQyHDBeh.js";import"./switch-t9Hay6Hq.js";import"./chevron-right-D-6n0McF.js";import"./credit-card-DqjaQidM.js";import"./dollar-sign-Cwr3Gu39.js";import"./users-CMrPg0xJ.js";import"./clock-bjnTPlpB.js";import"./calendar-DCWku5XV.js";import"./user-mASyYuwG.js";import"./use-favicon-DuYrl8Bg.js";import"./use-brand-theme-Bndhjp9t.js";/* empty css            *//* empty css                  */import"./utils-BkYo4WJR.js";function Ce(){var j,b;const{t}=H(),{auth:m,announcement:s,viewCount:y,totalEmployees:C,viewPercentage:g}=I().props,o=(m==null?void 0:m.permissions)||[],[D,p]=L.useState(!1),S=()=>{i.get(route("hr.announcements.index"))},_=()=>{i.get(route("hr.announcements.dashboard"))},k=()=>{i.get(route("hr.announcements.index"),{},{onSuccess:()=>{setTimeout(()=>{const n=document.querySelector(`[data-announcement-id="${s.id}"][data-action="edit"]`);n&&n.dispatchEvent(new MouseEvent("click",{bubbles:!0}))},500)}})},f=()=>{i.get(route("hr.announcements.statistics",s.id))},T=()=>{window.open(route("hr.announcements.download-attachment",s.id),"_blank")},A=()=>{p(!0)},E=()=>{a.loading(t("Deleting announcement...")),i.delete(route("hr.announcements.destroy",s.id),{onSuccess:n=>{p(!1),a.dismiss(),n.props.flash.success?a.success(t(n.props.flash.success)):n.props.flash.error?a.error(t(n.props.flash.error)):a.success(t("Announcement deleted successfully")),i.get(route("hr.announcements.index"))},onError:n=>{a.dismiss(),typeof n=="string"?a.error(n):a.error(`Failed to delete announcement: ${Object.values(n).join(", ")}`)}})},r=[];r.push({label:t("Back to List"),icon:e.jsx(v,{className:"h-4 w-4 mr-2"}),variant:"outline",onClick:S}),r.push({label:t("Dashboard"),icon:e.jsx(v,{className:"h-4 w-4 mr-2"}),variant:"outline",onClick:_}),l(o,"view-announcements")&&r.push({label:t("Statistics"),icon:e.jsx(N,{className:"h-4 w-4 mr-2"}),variant:"outline",onClick:f}),l(o,"edit-announcements")&&r.push({label:t("Edit"),icon:e.jsx(V,{className:"h-4 w-4 mr-2"}),variant:"default",onClick:k}),l(o,"delete-announcements")&&r.push({label:t("Delete"),icon:e.jsx(q,{className:"h-4 w-4 mr-2"}),variant:"destructive",onClick:A});const P=[{title:t("Dashboard"),href:route("dashboard")},{title:t("HR Management"),href:route("hr.announcements.index")},{title:t("Announcements"),href:route("hr.announcements.index")},{title:s.title}],B={"company news":"bg-blue-50 text-blue-700 ring-blue-600/20","policy updates":"bg-purple-50 text-purple-700 ring-purple-600/20",events:"bg-green-50 text-green-700 ring-green-600/20",HR:"bg-amber-50 text-amber-700 ring-amber-600/20","IT updates":"bg-indigo-50 text-indigo-700 ring-indigo-600/20"}[s.category]||"bg-gray-50 text-gray-700 ring-gray-600/20";return e.jsxs(M,{title:s.title,url:`/hr/announcements/${s.id}`,actions:r,breadcrumbs:P,children:[e.jsx(c,{className:"mb-6",children:e.jsxs(h,{children:[e.jsxs("div",{className:"flex flex-wrap justify-between items-start gap-2",children:[e.jsxs("div",{children:[e.jsx(u,{className:"text-2xl",children:s.title}),e.jsx(O,{className:"mt-2 text-base",children:s.description})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx("span",{className:`inline-flex items-center rounded-md px-2 py-1 text-sm font-medium ring-1 ring-inset ${B}`,children:s.category.charAt(0).toUpperCase()+s.category.slice(1)}),s.is_featured&&e.jsx(d,{variant:"secondary",className:"bg-purple-50 text-purple-700 hover:bg-purple-50",children:t("Featured")}),s.is_high_priority&&e.jsx(d,{variant:"secondary",className:"bg-red-50 text-red-700 hover:bg-red-50",children:t("High Priority")})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-4 mt-4 text-sm text-gray-500",children:[e.jsxs("div",{children:[e.jsxs("span",{className:"font-medium",children:[t("Start Date"),":"]})," ",s.start_date?((j=window.appSettings)==null?void 0:j.formatDateTimeSimple(s.start_date,!1))||new Date(s.start_date).toLocaleString():"-"]}),s.end_date&&e.jsxs("div",{children:[e.jsxs("span",{className:"font-medium",children:[t("End Date"),":"]})," ",s.end_date?((b=window.appSettings)==null?void 0:b.formatDateTimeSimple(s.end_date,!1))||new Date(s.end_date).toLocaleString():"-"]}),e.jsxs("div",{children:[e.jsxs("span",{className:"font-medium",children:[t("Audience"),":"]})," ",s.is_company_wide?t("Company-wide"):t("Targeted")]})]})]})}),e.jsxs(c,{className:"mb-6",children:[e.jsx(x,{className:"pt-6",children:e.jsx("div",{className:"prose max-w-none dark:prose-invert",dangerouslySetInnerHTML:{__html:s.content}})}),s.attachments&&e.jsx($,{children:e.jsxs(w,{variant:"outline",onClick:T,className:"flex items-center",children:[e.jsx(z,{className:"h-4 w-4 mr-2"}),t("Download Attachment")]})})]}),!s.is_company_wide&&(s.departments.length>0||s.branches.length>0)&&e.jsxs(c,{className:"mb-6",children:[e.jsx(h,{children:e.jsx(u,{children:t("Target Audience")})}),e.jsx(x,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.departments.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium mb-2",children:t("Departments")}),e.jsx("div",{className:"flex flex-wrap gap-2",children:s.departments.map(n=>e.jsx(d,{variant:"outline",children:n.name},n.id))})]}),s.branches.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium mb-2",children:t("Branches")}),e.jsx("div",{className:"flex flex-wrap gap-2",children:s.branches.map(n=>e.jsx(d,{variant:"outline",children:n.name},n.id))})]})]})})]}),l(o,"view-announcements")&&e.jsxs(c,{children:[e.jsx(h,{children:e.jsx(u,{children:t("Engagement Statistics")})}),e.jsx(x,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx("span",{children:t("Views")}),e.jsxs("span",{children:[y," / ",C," (",g,"%)"]})]}),e.jsx(F,{value:g,className:"h-2"})]}),e.jsx("div",{className:"flex justify-center",children:e.jsxs(w,{variant:"outline",onClick:f,className:"flex items-center",children:[e.jsx(N,{className:"h-4 w-4 mr-2"}),t("View Detailed Statistics")]})})]})})]}),e.jsx(R,{isOpen:D,onClose:()=>p(!1),onConfirm:E,itemName:s.title,entityName:"announcement"})]})}export{Ce as default};
