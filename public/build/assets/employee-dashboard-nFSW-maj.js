import{r as h,j as e}from"./ui-5WRyBZNT.js";import{P as $}from"./page-template-CKIx2Cd4.js";import{u as B,c as E,C as d,k as m,w as W,l as b,m as C,B as g,t as i,r as T}from"./app-Dcb6Z4yW.js";import{R as P}from"./refresh-cw-BLGufQC4.js";import{B as R}from"./bell-DGfoV3HU.js";import{U}from"./users-CMrPg0xJ.js";import{f as S}from"./utils-BkYo4WJR.js";import"./textarea-LYs2mVcU.js";import"./select-DeRz6PSF.js";import"./index-BdQq_4o_.js";import"./index-CCaALC5E.js";import"./language-WoaYFWNr.js";import"./trophy-CwLH3bof.js";import"./loader-circle-BHYyy5xm.js";import"./copy-CEvMX_m9.js";import"./CookieConsentBanner-DQyHDBeh.js";import"./switch-t9Hay6Hq.js";import"./chevron-right-D-6n0McF.js";import"./credit-card-DqjaQidM.js";import"./dollar-sign-Cwr3Gu39.js";import"./clock-bjnTPlpB.js";import"./calendar-DCWku5XV.js";import"./user-mASyYuwG.js";import"./use-favicon-DuYrl8Bg.js";import"./use-brand-theme-Bndhjp9t.js";/* empty css            *//* empty css                  */function fe({dashboardData:r}){var w;const{t}=B(),{auth:a}=E().props,_=(a==null?void 0:a.permissions)||[],[x,p]=h.useState(!1),[N,y]=h.useState(null),[k,v]=h.useState(null),[H,F]=h.useState("");h.useEffect(()=>{const s=r==null?void 0:r.todayAttendance;s&&(s.clock_in&&(y(new Date(`1970-01-01T${s.clock_in}`).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1})),p(!s.clock_out)),s.clock_out&&v(new Date(`1970-01-01T${s.clock_out}`).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1})));const o=setInterval(()=>{const c=r==null?void 0:r.employeeShift,l=r==null?void 0:r.todayAttendance;if(c&&(l!=null&&l.clock_in)&&!(l!=null&&l.clock_out)&&x){const j=new Date,O=new Date(`1970-01-01T${c.end_time}`);new Date(`1970-01-01T${j.getHours()}:${j.getMinutes()}:${j.getSeconds()}`)>O&&window.location.reload()}},6e4);return()=>clearInterval(o)},[r,x]);const A=()=>{i.loading(t("Clocking in...")),T.post(route("hr.attendance.clock-in"),{employee_id:a.user.id},{onSuccess:s=>{var n;i.dismiss(),(n=s.props.flash)!=null&&n.success?(p(!0),y(new Date().toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1})),i.success(t(s.props.flash.success))):i.error(t(s.props.flash.error||"Failed to clock in"))},onError:(s,n)=>{var o,c;if(i.dismiss(),(c=(o=n==null?void 0:n.props)==null?void 0:o.flash)!=null&&c.error)i.error(t(n.props.flash.error));else if(typeof s=="string")i.error(s);else if(s&&Object.keys(s).length>0){const l=Object.values(s)[0];i.error(Array.isArray(l)?l[0]:l)}else i.error(t("Failed to clock in. Please try again."))}})},L=()=>{i.loading(t("Clocking out...")),T.post(route("hr.attendance.clock-out"),{employee_id:a.user.id},{onSuccess:s=>{var n;i.dismiss(),(n=s.props.flash)!=null&&n.success?(p(!1),v(new Date().toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1})),i.success(t(s.props.flash.success))):i.error(t(s.props.flash.error||"Failed to clock out"))},onError:(s,n)=>{var o,c;if(i.dismiss(),(c=(o=n==null?void 0:n.props)==null?void 0:o.flash)!=null&&c.error)i.error(t(n.props.flash.error));else if(typeof s=="string")i.error(s);else if(s&&Object.keys(s).length>0){const l=Object.values(s)[0];i.error(Array.isArray(l)?l[0]:l)}else i.error(t("Failed to clock out. Please try again."))}})},M=[{label:t("Refresh"),icon:e.jsx(P,{className:"h-4 w-4"}),variant:"outline",onClick:()=>window.location.reload()}],f=(r==null?void 0:r.stats)||{totalAwards:0,totalWarnings:0,totalComplaints:0},u=(r==null?void 0:r.recentActivities)||{announcements:[],meetings:[]},I=s=>({approved:"bg-green-50 text-green-700 ring-green-600/20",pending:"bg-yellow-50 text-yellow-700 ring-yellow-600/20",rejected:"bg-red-50 text-red-700 ring-red-600/20"})[s]||"bg-gray-50 text-gray-700 ring-gray-600/20";return e.jsx($,{title:t("Dashboard"),url:"/dashboard",actions:M,children:e.jsxs("div",{className:"space-y-6",children:[e.jsx(d,{children:e.jsx(m,{className:"p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("h1",{className:"text-2xl font-bold mb-2",children:["Welcome, ",(w=a.user)==null?void 0:w.name,"!"]}),e.jsx("p",{className:"text-muted-foreground",children:"Stay updated with company announcements and meetings"})]})})}),e.jsxs("div",{className:"grid gap-6 grid-cols-1 md:grid-cols-3",children:[e.jsx(d,{children:e.jsx(m,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:t("Total Awards")}),e.jsx("p",{className:"mt-2 text-2xl font-bold",children:f.totalAwards})]}),e.jsx("div",{className:"rounded-full bg-green-100 p-3 dark:bg-green-900",children:e.jsx("svg",{className:"h-5 w-5 text-green-600 dark:text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z"})})})]})})}),e.jsx(d,{children:e.jsx(m,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:t("Total Warnings")}),e.jsx("p",{className:"mt-2 text-2xl font-bold",children:f.totalWarnings})]}),e.jsx("div",{className:"rounded-full bg-yellow-100 p-3 dark:bg-yellow-900",children:e.jsx("svg",{className:"h-5 w-5 text-yellow-600 dark:text-yellow-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 16.5c-.77.833.192 2.5 1.732 2.5z"})})})]})})}),e.jsx(d,{children:e.jsx(m,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:t("Total Complaints")}),e.jsx("p",{className:"mt-2 text-2xl font-bold",children:f.totalComplaints})]}),e.jsx("div",{className:"rounded-full bg-red-100 p-3 dark:bg-red-900",children:e.jsx("svg",{className:"h-5 w-5 text-red-600 dark:text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})})]})})})]}),e.jsx(d,{children:e.jsx(m,{className:"p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:t("Attendance")}),(r==null?void 0:r.employeeShift)&&e.jsx("div",{className:"mb-4 p-3 bg-blue-50 rounded-lg border border-blue-200",children:e.jsxs("p",{className:"text-sm text-blue-600 font-medium",children:[r.employeeShift.name," ",r.employeeShift.start_time," to ",r.employeeShift.end_time]})}),W(_,"clock-in-out")&&e.jsxs("div",{className:"flex justify-center gap-4 mb-6",children:[e.jsxs("button",{className:`flex items-center justify-center px-8 py-4 rounded-lg font-semibold transition-colors shadow-md ${x?"bg-gray-400 cursor-not-allowed text-white":"bg-green-500 hover:bg-green-600 text-white"}`,onClick:A,disabled:x,children:[e.jsxs("svg",{className:"h-5 w-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6l4 2"}),e.jsx("circle",{cx:"12",cy:"12",r:"10"})]}),t("Clock In")]}),e.jsxs("button",{className:`flex items-center justify-center px-8 py-4 rounded-lg font-semibold transition-colors shadow-md ${x?"bg-red-500 hover:bg-red-600 text-white":"bg-gray-400 cursor-not-allowed text-white"}`,onClick:L,disabled:!x,children:[e.jsx("svg",{className:"h-5 w-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),t("Clock Out")]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg border border-green-200",children:[e.jsx("p",{className:"text-sm text-green-600 font-medium mb-1",children:t("Clock In Time")}),e.jsx("p",{className:"text-lg font-bold text-green-800",children:N||"--:-- --"}),e.jsx("p",{className:"text-xs text-green-600",children:N?"Today":"Not clocked in"})]}),e.jsxs("div",{className:"bg-red-50 p-4 rounded-lg border border-red-200",children:[e.jsx("p",{className:"text-sm text-red-600 font-medium mb-1",children:t("Clock Out Time")}),e.jsx("p",{className:"text-lg font-bold text-red-800",children:k||"--:-- --"}),e.jsx("p",{className:"text-xs text-red-600",children:k?"Today":"Not clocked out"})]})]})]})})}),e.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[e.jsxs(d,{children:[e.jsx(b,{children:e.jsxs(C,{className:"flex items-center justify-between text-lg font-semibold",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(R,{className:"h-5 w-5"}),t("Recent Announcements")]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(g,{variant:"secondary",children:u.announcements.length}),e.jsx("button",{onClick:()=>window.location.href=route("hr.announcements.index"),className:"px-2 py-1 text-xs bg-blue-100 text-blue-700 hover:bg-blue-200 rounded-md font-medium transition-colors",children:t("View All")})]})]})}),e.jsx(m,{children:u.announcements.length>0?e.jsx("div",{className:"space-y-3 max-h-80 overflow-y-auto scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-gray-100",children:u.announcements.map((s,n)=>e.jsx("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("p",{className:"font-medium",children:s.title}),s.is_high_priority&&e.jsx(g,{variant:"outline",className:"text-xs ring-1 ring-inset bg-red-50 text-red-700 ring-red-600/20",children:"High Priority"})]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[s.category," • ",(()=>{try{return s.created_at?S(new Date(s.created_at),"MMM dd, yyyy"):"N/A"}catch{return"Invalid date"}})()]})]})},n))}):e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:t("No recent announcements")})})]}),e.jsxs(d,{children:[e.jsx(b,{children:e.jsxs(C,{className:"flex items-center justify-between text-lg font-semibold",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(U,{className:"h-5 w-5"}),t("Recent Meetings")]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(g,{variant:"secondary",children:u.meetings.length}),e.jsx("button",{onClick:()=>window.location.href=route("meetings.meetings.index"),className:"px-2 py-1 text-xs bg-blue-100 text-blue-700 hover:bg-blue-200 rounded-md font-medium transition-colors",children:t("View All")})]})]})}),e.jsx(m,{children:u.meetings.length>0?e.jsx("div",{className:"space-y-3 max-h-80 overflow-y-auto scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-gray-100",children:u.meetings.map((s,n)=>e.jsx("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("p",{className:"font-medium",children:s.title}),e.jsx(g,{variant:"outline",className:`text-xs ring-1 ring-inset ${I(s.status)}`,children:s.status})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:(()=>{try{if(!s.meeting_date)return"No date set";const o=new Date(s.meeting_date);if(isNaN(o.getTime()))return"Invalid date";const c=S(o,"MMM dd, yyyy"),l=s.start_time&&s.end_time?` • ${s.start_time} - ${s.end_time}`:"";return c+l}catch{return"Invalid date"}})()})]})},n))}):e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:t("No recent meetings")})})]})]})]})})}export{fe as default};
