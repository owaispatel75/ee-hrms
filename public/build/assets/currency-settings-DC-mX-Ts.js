import{r as C,j as e}from"./ui-5WRyBZNT.js";import{u as _,c as A,al as z,C as L,l as O,k as R,I as q,n as x,L as m,B as H,ae as f,q as y,s as N,v as S,J as v,x as J,t as u,r as U}from"./app-Dcb6Z4yW.js";import{S as w,a as F,b as P,c as D,d as l}from"./select-DeRz6PSF.js";import{S as I}from"./switch-t9Hay6Hq.js";import{D as W}from"./dollar-sign-Cwr3Gu39.js";import{I as b}from"./info-DMPjqPji.js";/* empty css            *//* empty css                  */import"./utils-BkYo4WJR.js";import"./index-BdQq_4o_.js";import"./index-CCaALC5E.js";function ce(){const{t:a}=_(),{currencies:n=[],systemSettings:d={},globalSettings:i}=A().props,[r,g]=C.useState({decimalFormat:d.decimalFormat||"2",defaultCurrency:d.defaultCurrency||"USD",decimalSeparator:d.decimalSeparator||".",thousandsSeparator:d.thousandsSeparator||",",floatNumber:d.floatNumber!=="0",currencySymbolSpace:d.currencySymbolSpace==="1",currencySymbolPosition:d.currencySymbolPosition||"before",currencyName:""}),[k,T]=C.useState(1234.56);C.useEffect(()=>{if(n&&n.length>0){const s=n.find(t=>t.code===r.defaultCurrency);s&&g(t=>({...t,currencyName:s.name}))}},[n,r.defaultCurrency]);const o=(s,t)=>{g(c=>({...c,[s]:t}))},B=s=>{const t=n.find(c=>c.code===s);g(c=>({...c,defaultCurrency:s,currencyName:(t==null?void 0:t.name)||s}))},E=()=>{try{let s=k;const t=parseInt(r.decimalFormat);r.floatNumber||(s=Math.floor(s));const c=s.toFixed(t).split(".");r.thousandsSeparator!=="none"&&(c[0]=c[0].replace(/\B(?=(\d{3})+(?!\d))/g,r.thousandsSeparator));let j=c.join(r.decimalSeparator);const h=n.find(V=>V.code===r.defaultCurrency),p=(h==null?void 0:h.symbol)||"$",$=r.currencySymbolSpace?" ":"";return r.currencySymbolPosition==="before"?`${p}${$}${j}`:`${j}${$}${p}`}catch{return"Invalid format"}},M=s=>{s.preventDefault(),i!=null&&i.is_demo||u.loading(a("Saving currency settings...")),U.post(route("settings.currency.update"),r,{preserveScroll:!0,onSuccess:t=>{var h,p;i!=null&&i.is_demo||u.dismiss();const c=(h=t.props.flash)==null?void 0:h.success,j=(p=t.props.flash)==null?void 0:p.error;c?u.success(c):j?u.error(j):u.success(a("Currency settings updated successfully"))},onError:t=>{i!=null&&i.is_demo||u.dismiss();const c=t.error||Object.values(t).join(", ")||a("Failed to update currency settings");u.error(c)}})};return e.jsx(z,{title:a("Currency Settings"),description:a("Configure how currency values are displayed throughout the application"),action:e.jsxs(x,{type:"submit",form:"currency-settings-form",size:"sm",children:[e.jsx(J,{className:"h-4 w-4 mr-2"}),a("Save Changes")]}),children:e.jsx("form",{id:"currency-settings-form",onSubmit:M,children:e.jsx("div",{className:"grid grid-cols-1 gap-6",children:e.jsx("div",{children:e.jsxs(L,{children:[e.jsx(O,{className:"pb-3",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(W,{className:"h-5 w-5 text-primary"}),e.jsx("h3",{className:"text-base font-medium",children:a("Format Options")})]})})}),e.jsx(R,{children:e.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[e.jsxs("div",{className:"p-4 bg-muted/30 rounded-md border flex flex-col md:flex-row items-center justify-between",children:[e.jsxs("div",{className:"flex flex-col items-center md:items-start mb-3 md:mb-0",children:[e.jsx("div",{className:"text-2xl font-semibold mb-1",children:E()}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[r.currencyName," (",r.defaultCurrency,")"]})]}),e.jsx("div",{className:"w-full md:w-auto md:max-w-[200px]",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(q,{type:"number",className:"text-right h-8 text-sm",value:k,onChange:s=>T(parseFloat(s.target.value)||0),placeholder:"Test amount"}),e.jsx(x,{variant:"outline",onClick:()=>T(1234.56),type:"button",size:"sm",className:"h-8 text-xs",children:"Reset"})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(m,{htmlFor:"defaultCurrency",className:"font-medium",children:a("Default Currency")}),e.jsx(H,{variant:"outline",className:"font-mono",children:r.defaultCurrency})]}),e.jsxs(w,{value:r.defaultCurrency,onValueChange:B,children:[e.jsx(F,{children:e.jsx(P,{placeholder:a("Select currency")})}),e.jsx(D,{children:e.jsx("div",{className:"max-h-[300px] overflow-y-auto",children:n&&n.length>0?n.map(s=>e.jsx(l,{value:s.code,children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"w-8 text-center",children:s.symbol}),e.jsxs("span",{children:[s.code," - ",s.name]}),s.is_default&&e.jsx("span",{className:"ml-2 text-xs text-primary",children:"(Default)"})]})},s.id)):e.jsx("div",{className:"p-2 text-center text-muted-foreground",children:a("No currencies found")})})})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(m,{htmlFor:"decimalFormat",className:"font-medium",children:a("Decimal Places")}),e.jsx(f,{children:e.jsxs(y,{children:[e.jsx(N,{asChild:!0,children:e.jsx(b,{className:"h-4 w-4 text-muted-foreground"})}),e.jsx(S,{children:e.jsx("p",{children:a("Number of digits after decimal point")})})]})})]}),e.jsxs(w,{value:r.decimalFormat,onValueChange:s=>o("decimalFormat",s),children:[e.jsx(F,{children:e.jsx(P,{placeholder:"Select decimal format"})}),e.jsxs(D,{children:[e.jsx(l,{value:"0",children:"0 (e.g., 1234)"}),e.jsx(l,{value:"1",children:"1 (e.g., 1234.5)"}),e.jsx(l,{value:"2",children:"2 (e.g., 1234.56)"}),e.jsx(l,{value:"3",children:"3 (e.g., 1234.567)"}),e.jsx(l,{value:"4",children:"4 (e.g., 1234.5678)"})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(m,{htmlFor:"currencySymbolPosition",className:"font-medium",children:a("Symbol Position")}),e.jsx(f,{children:e.jsxs(y,{children:[e.jsx(N,{asChild:!0,children:e.jsx(b,{className:"h-4 w-4 text-muted-foreground"})}),e.jsx(S,{children:e.jsx("p",{children:a("Where to place the currency symbol")})})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs(x,{type:"button",variant:r.currencySymbolPosition==="before"?"default":"outline",className:"justify-center",onClick:()=>o("currencySymbolPosition","before"),children:[e.jsx("span",{className:"mr-2",children:"$"}),"100",r.currencySymbolPosition==="before"&&e.jsx(v,{className:"h-4 w-4 ml-2"})]}),e.jsxs(x,{type:"button",variant:r.currencySymbolPosition==="after"?"default":"outline",className:"justify-center",onClick:()=>o("currencySymbolPosition","after"),children:["100",e.jsx("span",{className:"ml-2",children:"$"}),r.currencySymbolPosition==="after"&&e.jsx(v,{className:"h-4 w-4 ml-2"})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(m,{htmlFor:"decimalSeparator",className:"font-medium",children:a("Decimal Separator")}),e.jsx(f,{children:e.jsxs(y,{children:[e.jsx(N,{asChild:!0,children:e.jsx(b,{className:"h-4 w-4 text-muted-foreground"})}),e.jsx(S,{children:e.jsx("p",{children:a("Character used to separate decimal places")})})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs(x,{type:"button",variant:r.decimalSeparator==="."?"default":"outline",className:"justify-center",onClick:()=>o("decimalSeparator","."),children:[a("Dot")," (123.45)",r.decimalSeparator==="."&&e.jsx(v,{className:"h-4 w-4 ml-2"})]}),e.jsxs(x,{type:"button",variant:r.decimalSeparator===","?"default":"outline",className:"justify-center",onClick:()=>o("decimalSeparator",","),children:[a("Comma")," (123,45)",r.decimalSeparator===","&&e.jsx(v,{className:"h-4 w-4 ml-2"})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(m,{htmlFor:"thousandsSeparator",className:"font-medium",children:a("Thousands Separator")}),e.jsx(f,{children:e.jsxs(y,{children:[e.jsx(N,{asChild:!0,children:e.jsx(b,{className:"h-4 w-4 text-muted-foreground"})}),e.jsx(S,{children:e.jsx("p",{children:a("Character used to group thousands")})})]})})]}),e.jsxs(w,{value:r.thousandsSeparator,onValueChange:s=>o("thousandsSeparator",s),children:[e.jsx(F,{children:e.jsx(P,{placeholder:a("Select thousands separator")})}),e.jsxs(D,{children:[e.jsx(l,{value:",",children:"Comma (1,234.56)"}),e.jsx(l,{value:".",children:"Dot (1.234,56)"}),e.jsx(l,{value:" ",children:"Space (1 234.56)"}),e.jsx(l,{value:"none",children:"None (123456.78)"})]})]})]}),e.jsx("div",{className:"space-y-3 border rounded-md p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(m,{htmlFor:"floatNumber",className:"font-medium",children:a("Show Decimals")}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:a("Display decimal places in amounts")})]}),e.jsx(I,{id:"floatNumber",checked:r.floatNumber,onCheckedChange:s=>o("floatNumber",s)})]})}),e.jsx("div",{className:"space-y-3 border rounded-md p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(m,{htmlFor:"currencySymbolSpace",className:"font-medium",children:a("Add Space")}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:a("Space between amount and symbol")})]}),e.jsx(I,{id:"currencySymbolSpace",checked:r.currencySymbolSpace,onCheckedChange:s=>o("currencySymbolSpace",s)})]})})]})]})})]})})})})})}export{ce as default};
